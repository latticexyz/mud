import { Tabs, Tab } from "nextra/components";
import { CollapseCode } from "../components/CollapseCode";

# World Explorer

World Explorer is a GUI tool designed for visually exploring and manipulating the state of worlds.
It is available in the MUD TypeScript templates starting with version 2.2.

## Installation (for earlier MUD versions)

These are the steps to install World Explorer into a MUD template:

1. Install the Indexer and World Explorer.

   ```sh copy
   pnpm install @latticexyz/explorer @latticexyz/store-indexer -w
   ```

1. Edit `mprocs.yaml`.

   <CollapseCode>

   ```yaml filename="mproces.yaml" showLineNumbers {11-20}
   procs:
     client:
       cwd: packages/client
       shell: pnpm run dev
     contracts:
       cwd: packages/contracts
       shell: pnpm mud dev-contracts --rpc http://127.0.0.1:8545
     anvil:
       cwd: packages/contracts
       shell: anvil --base-fee 0 --block-time 2
     indexer:
       cwd: packages/contracts
       shell: rimraf $SQLITE_FILENAME && pnpm sqlite-indexer
       env:
         RPC_HTTP_URL: "http://127.0.0.1:8545"
         FOLLOW_BLOCK_TAG: "latest"
         SQLITE_FILENAME: "indexer.db"
     explorer:
       cwd: packages/contracts
       shell: pnpm explorer
   ```

   </CollapseCode>

## Usage

<Tabs items={["Data Explorer", "Interact"]}>
  <Tab>
    <iframe
      width="761"
      height="523"
      src="https://www.youtube.com/embed/9u-T5MiBynM"
      title="Using the MUD Data Explorer"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    ></iframe>
  </Tab>
  <Tab>
    <iframe
      width="761"
      height="523"
      src="https://www.youtube.com/embed/ZJWvODGl8uU"
      title="Using the MUD Data Explorer's Interact tab"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    ></iframe>
  </Tab>
</Tabs>

### CLI options

To use the explorer with different command-line options, use this process:

1. In the mprocs screen, go down to the **explorer** process.

1. Type `x` to stop the default explorer.

1. In a different command-line window, go to `packages/contract`.

1. Run the explorer using `pnpm explorer <options>`.

The World Explorer accepts the following CLI options:

| Option              | Description                                                                      | Default value |
| ------------------- | -------------------------------------------------------------------------------- | ------------- |
| `--worldAddress`    | The address of the world to explore                                              | None          |
| `--worldsFile`      | Path to a worlds configuration file (used to resolve world address)              | None          |
| `--indexerDatabase` | Path to your SQLite indexer database                                             | indexer.db    |
| `--chainId`         | The chain ID of the network                                                      | 31337         |
| `--port`            | The port on which to run the World Explorer                                      | 13690         |
| `--env`             | The environment to run the World Explorer in (e.g., "development", "production") | production    |

## Contributing

To contribute to or modify the World Explorer, the easiest way is to run the example setup in `development` mode.

1. Create a [local development setup](/contribute#local-development-setup):

   ```sh copy
   git clone https://github.com/latticexyz/mud.git
   cd mud
   pnpm install
   pnpm build
   ```

1. Change to the example directory.

   ```sh copy
   cd examples/local-explorer/
   ```

1. Edit the explorer line in `mprocs.yaml`

   <CollapseCode>

   ```yaml filename="mprocs.yaml" copy showLineNumbers {20}
   procs:
     client:
       cwd: packages/client
       shell: pnpm run dev
     contracts:
       cwd: packages/contracts
       shell: pnpm mud dev-contracts --rpc http://127.0.0.1:8545
     anvil:
       cwd: packages/contracts
       shell: anvil --base-fee 0 --block-time 2
     indexer:
       cwd: packages/contracts
       shell: rimraf $SQLITE_FILENAME && pnpm sqlite-indexer
       env:
         RPC_HTTP_URL: "http://127.0.0.1:8545"
         FOLLOW_BLOCK_TAG: "latest"
         SQLITE_FILENAME: "indexer.db"
     explorer:
       cwd: packages/contracts
       shell: pnpm explorer --env development
   ```

   </CollapseCode>

1. Install the libraries and run the application.

   ```sh copy
   pnpm install
   pnpm dev
   ```

1. In a separate command-line window, go to `mud/package/explorer` and modify that package.
   The code should rebuild automatically after you save changes.

   If you want to modidy the user interface code, it is at `src/app/worlds/\[worldAddress\]`.
