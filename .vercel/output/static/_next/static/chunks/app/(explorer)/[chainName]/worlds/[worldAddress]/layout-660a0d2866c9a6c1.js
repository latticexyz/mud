(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1667],{37863:function(e,n,t){Promise.resolve().then(t.bind(t,42884))},42884:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return er}});var a=t(75536),r=t(97554),s=t(45215),i=t(6270),c=t(23638),o=t(63643),d=t(14309),l=t(35605),f=t(68347);function u(){let{id:e}=(0,l.A)(),{data:n}=(0,d.O)({watch:!0,chainId:e});return(0,a.jsx)("div",{className:"inline-block w-[50px]",children:n?(0,a.jsxs)("div",{className:"flex items-center justify-end text-xs font-extrabold text-green-600",children:[(0,a.jsx)("span",{className:"mr-2 inline-block h-[8px] w-[8px] animate-pulse rounded-full",style:{background:"rgb(64, 182, 107)"}}),(0,a.jsx)("span",{className:"opacity-70",children:n.toString()})]}):(0,a.jsx)(f.O,{className:"h-[10px]"})})}var m=t(35431),p=t(66585),x=t(52616),h=t(1372),b=t(37272),g=t(16378),j=t(92463),y=t(87925),v=t(62281),N=t(21385),w=t(50343),k=t(89702),z=t(75812),C=t(28599),O=t(74026);let _=["0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80","0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d","0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a","0x7c852118294e51e653712a81e05800f419141751be58f605c371e15141b007a6","0x47e179ec197488593b187f80a00eb0da91f1b9d0b13f8733639f19c30a34926a","0x8b3a350cf5c34c9194ca85829a2df0ec3153be0318b5e2d3348e872092edffba","0x92db14e403b83dfe3df233f83dfa3a0d7096f21ca9b0d6d6b8d88b2b4ec1564e","0x4bbbf85ce3377467afe5d46f804f221813b2bb87f24d81f60f1fcdbf7cbf4356","0xdbda1821b80551c9d65939329250298aa3472ba22feea921c0cf5d620ea67b97","0x2a871d0798f97d79848a013d4936a73bf4cc922c825d33c1cf7073dff6d409c6"].map(e=>(0,C.L)(e)),Z=e=>{let n=e!==b.O.id;return _.map((e,t)=>(function(e){let{id:n,name:t,accounts:a,disabled:r}=e;if(!a.length)throw Error("missing accounts");let s=!1;return(0,O.K)(()=>({id:n,name:t,type:"anvil",accounts:a,connect:async()=>(s=!0,{accounts:a.map(e=>e.address),chainId:b.O.id}),async disconnect(){s=!1},getAccounts:async()=>a.map(e=>e.address),getChainId:async()=>b.O.id,getProvider:async()=>(0,z.d)()({chain:b.O}),async isAuthorized(){return!r&&!!s&&!!(await this.getAccounts()).length},async onAccountsChanged(){},async onDisconnect(){},onChainChanged(){}}))})({id:"anvil-".concat(t),name:"Anvil #".concat(t+1),accounts:[e],disabled:n}))};function A(e){return"anvil"===e.type}var E=t(85723),R=t(55823),S=t(19362),I=t(51550),W=t(93715);let P=W.fC;W.ZA;let U=W.B4,D=k.forwardRef((e,n)=>{let{className:t,children:r,...s}=e;return(0,a.jsxs)(W.xz,{ref:n,className:(0,p.cn)("flex h-10 w-full items-center justify-between px-3 py-2 text-sm","rounded-md border border-input bg-background ring-offset-background","placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,(0,a.jsx)(W.JO,{asChild:!0,children:(0,a.jsx)(R.Z,{className:"h-4 w-4 opacity-50"})})]})});D.displayName=W.xz.displayName;let L=k.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,a.jsx)(W.u_,{ref:n,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(S.Z,{className:"h-4 w-4"})})});L.displayName=W.u_.displayName;let Y=k.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,a.jsx)(W.$G,{ref:n,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(R.Z,{className:"h-4 w-4"})})});Y.displayName=W.$G.displayName;let F=k.forwardRef((e,n)=>{let{className:t,children:r,position:s="popper",...i}=e;return(0,a.jsx)(W.h_,{children:(0,a.jsxs)(W.VY,{ref:n,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden","rounded-md border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0","data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2","data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[(0,a.jsx)(L,{}),(0,a.jsx)(W.l_,{className:(0,p.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(Y,{})]})})});F.displayName=W.VY.displayName,k.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,a.jsx)(W.__,{ref:n,className:(0,p.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=W.__.displayName;let M=k.forwardRef((e,n)=>{let{className:t,children:r,...s}=e;return(0,a.jsxs)(W.ck,{ref:n,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(W.wU,{children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(W.eT,{children:r})]})});function B(e){let{hex:n}=e;return n.length<=10?(0,a.jsx)("span",{children:n}):(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"after:select-none after:content-['â€¦']",children:n.slice(0,6)}),(0,a.jsx)("span",{className:"tracking-[-1ch] text-transparent",children:n.slice(6,-4)}),n.slice(-4)]})}function T(e){let{connector:n}=e,t=n.accounts[0].address,{data:r}=(0,y.K)({address:t,query:{refetchInterval:15e3,select:e=>null==e?void 0:e.value,enabled:!!t}});return(0,a.jsxs)(M,{value:n.id,className:"font-mono",children:[n.name,void 0!==r&&" (".concat((0,p.a)(r)," ETH)")," ",t&&(0,a.jsxs)("span",{className:"opacity-70",children:["(",(0,a.jsx)(B,{hex:t}),")"]})]},t)}function V(){let[e,n]=(0,k.useState)(!1),{connector:t}=(0,v.m)(),{connect:r}=(0,N.$)(),{openConnectModal:s}=(0,g.We)(),i=[...(0,w.Y)().filter(A)];return(0,a.jsxs)(P,{open:e,onOpenChange:n,value:null==t?void 0:t.id,onValueChange:e=>{let n=i.find(n=>n.id===e);n&&r({connector:n})},children:[(0,a.jsx)(E.z,{size:"sm",asChild:!0,children:(0,a.jsxs)(D,{children:[(0,a.jsx)(x.Z,{className:"mr-2 inline-block h-4 w-4"}),(0,a.jsx)(U,{placeholder:"Connect"})]})}),(0,a.jsxs)(F,{children:[i.map(e=>(0,a.jsx)(T,{connector:e},e.id)),(0,a.jsxs)(E.z,{size:"sm",className:"mt-2 w-full font-mono",onClick:()=>{n(!1),null==s||s()},children:[(0,a.jsx)(j.Z,{className:"mr-2 inline-block h-4 w-4"}),"Add wallet"]})]})]})}function $(){let{id:e}=(0,l.A)();return(0,a.jsx)(g.NL.Custom,{children:n=>{let{account:t,chain:r,openAccountModal:s,openChainModal:i,openConnectModal:c,mounted:o}=n;return(0,a.jsx)("div",{className:(0,p.cn)({"pointer-events-none select-none opacity-0":!o}),children:o&&t&&r?r.unsupported?(0,a.jsxs)(E.z,{type:"button",size:"sm",onClick:i,children:[(0,a.jsx)(h.Z,{className:"mr-2 inline-block h-4 w-4"}),"Wrong network"]}):(0,a.jsx)("div",{className:"flex-wrap gap-2",children:(0,a.jsxs)(E.z,{type:"button",size:"sm",onClick:s,variant:"secondary",children:[(0,a.jsx)(x.Z,{className:"mr-2 inline-block h-4 w-4"}),t.displayName,(0,a.jsx)("span",{className:"ml-2 font-normal opacity-70",children:t.displayBalance?" (".concat(t.displayBalance,")"):""})]})}):e===b.O.id?(0,a.jsx)(V,{}):(0,a.jsxs)(E.z,{type:"button",size:"sm",onClick:c,children:[(0,a.jsx)(x.Z,{className:"mr-2 inline-block h-4 w-4"})," Connect"]})})}})}function q(){let e=(0,i.usePathname)(),n=(0,c.g)(),{data:t,isFetched:d}=(0,o.b)();return(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-x-6 py-4",children:[(0,a.jsx)(s.default,{href:n("explore"),className:(0,p.cn)("text-sm uppercase underline-offset-[16px]",{"font-semibold underline decoration-orange-500 decoration-4":e===n("explore")}),children:"Explore"}),(0,a.jsx)(s.default,{href:n("interact"),className:(0,p.cn)("text-sm uppercase underline-offset-[16px]",{"font-semibold underline decoration-orange-500 decoration-4":e===n("interact")}),children:"Interact"}),(0,a.jsx)(s.default,{href:n("observe"),className:(0,p.cn)("text-sm uppercase underline-offset-[16px]",{"font-semibold underline decoration-orange-500 decoration-4":e===n("observe")}),children:"Observe"})]}),d&&!(null==t?void 0:t.isWorldDeployed)&&(0,a.jsxs)("h4",{className:"font-mono text-sm font-bold uppercase opacity-70",children:["Waiting for world deploy ",(0,a.jsx)(r.Z,{className:"inline-block h-4 w-4 animate-spin"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,a.jsx)(u,{}),(0,a.jsx)($,{})]})]}),(0,a.jsx)(m.Z,{})]})}M.displayName=W.ck.displayName,k.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,a.jsx)(W.Z0,{ref:n,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=W.Z0.displayName;var G=t(24114),K=t(81793),H=t(8931),J=t(82405),Q=t(59297),X=t(20591);t(10230);var ee=t(91004),en=t(50693);let et=new ee.S;function ea(e){let{children:n}=e,t=(0,l.A)(),r=(0,k.useMemo)(()=>(0,G._)({chains:[t],connectors:[(0,H.L)(),(0,J.O)({dappMetadata:{name:"World Explorer"}}),(0,Q.T)(),...Z(t.id)],transports:{[t.id]:(0,z.d)()},ssr:!0}),[t]);return(0,a.jsx)(K.F,{config:r,children:(0,a.jsx)(en.aH,{client:et,children:(0,a.jsx)(g.pj,{theme:(0,X.$)(),children:n})})})}function er(e){let{children:n}=e;return(0,a.jsxs)(ea,{children:[(0,a.jsx)(q,{}),n]})}},35605:function(e,n,t){"use strict";t.d(n,{A:function(){return s}});var a=t(6270),r=t(84367);function s(){let{chainName:e}=(0,a.useParams)();return(0,r.Yx)(e),r.df[e]}},23638:function(e,n,t){"use strict";t.d(n,{g:function(){return r}});var a=t(6270);function r(){let{chainName:e,worldAddress:n}=(0,a.useParams)();return t=>"/".concat(e,"/worlds/").concat(n,"/").concat(t)}},63643:function(e,n,t){"use strict";t.d(n,{b:function(){return i}});var a=t(6270),r=t(95951),s=t(84367);function i(){let{chainName:e,worldAddress:n}=(0,a.useParams)();(0,s.Yx)(e);let{id:t}=s.df[e];return(0,r.a)({queryKey:["worldAbi",e,n],queryFn:async()=>{let e=await fetch("/api/world-abi?".concat(new URLSearchParams({chainId:t.toString(),worldAddress:n})));return await e.json()},select:e=>({abi:e.abi||[],isWorldDeployed:e.isWorldDeployed}),refetchInterval:15e3})}},84367:function(e,n,t){"use strict";t.d(n,{is:function(){return f},M0:function(){return d},df:function(){return l},wG:function(){return u},Yx:function(){return m}});var a=t(37272),r=t(74278),s=t(47852),i=t(84432);({...r.t});var c={...s.T,iconUrls:["https://redstone.xyz/chain-icons/garnet.png"],indexerUrl:"https://indexer.mud.garnetchain.com"},o={...i.g,iconUrls:["https://redstone.xyz/chain-icons/redstone.png"],indexerUrl:"https://indexer.mud.redstonechain.com"};let d=["world","store","metadata"],l={anvil:a.O,garnet:c,redstone:o},f=Object.fromEntries(Object.entries(l).map(e=>{let[n,t]=e;return[t.id,n]}));function u(e){if(!("number"==typeof e&&e in f))throw Error("Invalid chain ID. Supported chains are: ".concat(Object.keys(f).join(", "),"."))}function m(e){if(!("string"==typeof e&&e in l))throw Error("Invalid chain name. Supported chains are: ".concat(Object.keys(l).join(", "),"."))}},85723:function(e,n,t){"use strict";t.d(n,{z:function(){return d}});var a=t(75536),r=t(67157),s=t(89702),i=t(14292),c=t(66585);let o=(0,r.j)((0,c.cn)("inline-flex items-center justify-center rounded-md","whitespace-nowrap text-sm font-medium","ring-offset-background transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50"),{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,n)=>{let{className:t,variant:r,size:s,type:d="button",asChild:l=!1,...f}=e,u=l?i.g7:"button";return(0,a.jsx)(u,{className:(0,c.cn)(o({variant:r,size:s,className:t})),ref:n,type:d,...f})});d.displayName="Button"},35431:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var a=t(75536),r=t(89702),s=t(80967),i=t(66585);let c=r.forwardRef((e,n)=>{let{className:t,orientation:r="horizontal",decorative:c=!0,...o}=e;return(0,a.jsx)(s.f,{ref:n,decorative:c,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});c.displayName=s.f.displayName},68347:function(e,n,t){"use strict";t.d(n,{O:function(){return s}});var a=t(75536),r=t(66585);function s(e){let{className:n,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",n),...t})}},66585:function(e,n,t){"use strict";t.d(n,{a:function(){return o},cn:function(){return i},f:function(){return c}});var a=t(20997),r=t(88014),s=t(47228);function i(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,s.m)((0,r.W)(n))}function c(e){return e.replace(/[A-Z]/g,e=>"_".concat(e.toLowerCase())).replace(/^_/,"")}function o(e){let n=(0,a.d)(e),t=Math.floor(parseFloat(n)).toString().length;return parseFloat(n).toLocaleString("en-US",{maximumFractionDigits:Math.max(0,6-t)})}}},function(e){e.O(0,[8554,5056,2762,7994,879,2522,5215,3715,7528,9213,8474,1744],function(){return e(e.s=37863)}),_N_E=e.O()}]);