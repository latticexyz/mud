(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3027],{74935:function(e,t,n){Promise.resolve().then(n.bind(n,55423))},55423:function(e,t,n){"use strict";n.d(t,{Form:function(){return Z}});var r,a,s=n(75536),i=n(34724),l=n(68344),o=n(55507),c=n(89702),u=n(33929),d=n(35431),m=n(68347),f=n(66585),p=n(6270),h=n(92996),x=n(63643),b=n(62281),y=n(94302),v=n(59201),g=n(3092),j=n(16378),w=n(85723),N=n(29438),I=n(29576),M=n(9878),E=n(50693),k=n(53440),R=n(22005),F=n(58248),S=n(98028),z=n(35605);(r=a||(a={}))[r.READ=0]="READ",r[r.WRITE=1]="WRITE";let O=y.z.object({inputs:y.z.array(y.z.string()),value:y.z.string().optional()});function A(e){let{abi:t}=e,n="view"===t.stateMutability||"pure"===t.stateMutability?0:1,[r,m]=(0,c.useState)(null),{openConnectModal:f}=(0,j.We)(),h=function(e){let{abi:t,operationType:n}=e,{worldAddress:r}=(0,p.useParams)(),{id:s}=(0,z.A)(),i=(0,E.NL)(),l=(0,M.Z)(),o=(0,b.m)();return(0,k.D)({mutationFn:async e=>{let{inputs:i,value:o}=e;if(n===a.READ)return{result:await (0,R.L)(l,{abi:[t],address:r,functionName:t.name,args:i,chainId:s})};{let e=await (0,F.n)(l,{abi:[t],address:r,functionName:t.name,args:i,...o&&{value:BigInt(o)},chainId:s}),n=await (0,S.e)(l,{hash:e,pollingInterval:100});return{txHash:e,receipt:n}}},onMutate:()=>{if(n===a.WRITE)return{toastId:I.A.loading("Transaction submitted")}},onSuccess:(e,t,r)=>{n===a.WRITE&&"txHash"in e&&I.A.success("Transaction successful with hash: ".concat(e.txHash),{id:null==r?void 0:r.toastId}),i.invalidateQueries({queryKey:["balance",{address:o,chainId:s}]})},onError:(e,t,n)=>{console.error("Error:",e),I.A.error(e.message||"Something went wrong. Please try again.",{id:null==n?void 0:n.toastId})}})}({abi:t,operationType:n}),x=(0,b.m)(),y=(0,v.cI)({resolver:(0,g.F)(O),defaultValues:{inputs:[]}});async function A(e){if(!x.isConnected)return null==f?void 0:f();let t=await h.mutateAsync({inputs:e.inputs,value:e.value});0===n&&"result"in t&&m(JSON.stringify(t.result,null,2))}let Z=null==t?void 0:t.inputs.map(e=>e.type).join(", ");return(0,s.jsxs)(N.l0,{...y,children:[(0,s.jsxs)("form",{onSubmit:y.handleSubmit(A),id:t.name,className:"space-y-4 pb-4",children:[(0,s.jsxs)("h3",{className:"pt-4 font-semibold",children:[(0,s.jsx)("span",{className:"text-orange-500",children:null==t?void 0:t.name}),(0,s.jsx)("span",{className:"opacity-50",children:Z&&" (".concat(Z,")")}),(0,s.jsxs)("span",{className:"ml-2 opacity-50",children:["payable"===t.stateMutability&&(0,s.jsx)(i.Z,{className:"mr-2 inline-block h-4 w-4"}),("view"===t.stateMutability||"pure"===t.stateMutability)&&(0,s.jsx)(l.Z,{className:"mr-2 inline-block h-4 w-4"}),"nonpayable"===t.stateMutability&&(0,s.jsx)(o.Z,{className:"mr-2 inline-block h-4 w-4"})]})]}),null==t?void 0:t.inputs.map((e,t)=>(0,s.jsx)(N.Wi,{control:y.control,name:"inputs.".concat(t),render:t=>{let{field:n}=t;return(0,s.jsxs)(N.xJ,{children:[(0,s.jsx)(N.lX,{children:e.name}),(0,s.jsx)(N.NI,{children:(0,s.jsx)(u.I,{placeholder:e.type,...n})}),(0,s.jsx)(N.zG,{})]})}},t)),"payable"===t.stateMutability&&(0,s.jsx)(N.Wi,{control:y.control,name:"value",render:e=>{let{field:t}=e;return(0,s.jsxs)(N.xJ,{children:[(0,s.jsx)(N.lX,{children:"ETH value"}),(0,s.jsx)(N.NI,{children:(0,s.jsx)(u.I,{placeholder:"uint256",...t})}),(0,s.jsx)(N.zG,{})]})}}),(0,s.jsxs)(w.z,{type:"submit",disabled:h.isPending,children:[("view"===t.stateMutability||"pure"===t.stateMutability)&&"Read",("payable"===t.stateMutability||"nonpayable"===t.stateMutability)&&"Write"]}),r&&(0,s.jsx)("pre",{className:"text-md rounded border p-3 text-sm",children:r})]}),(0,s.jsx)(d.Z,{})]})}function Z(){var e;let[t]=function(){let e=(0,c.useMemo)(()=>()=>window.location.hash.replace(/^#!?/,""),[]),t=(0,p.useRouter)(),n=(0,p.useParams)(),[r,a]=(0,c.useState)(e());(0,c.useEffect)(()=>{a(e())},[n]);let s=()=>{a(e())};return(0,c.useEffect)(()=>(window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}),[]),[r,e=>{let n=window.location.href;n=h.Z.stringifyUrl({url:n.split("#")[0],fragmentIdentifier:e}),a(e),t.replace(n)}]}(),{data:n,isFetched:r}=(0,x.b)(),[a,b]=(0,c.useState)(""),y=(0,c.useDeferredValue)(a),v=null==n?void 0:null===(e=n.abi)||void 0===e?void 0:e.filter(e=>e.name.toLowerCase().includes(y.toLowerCase()));return(0,s.jsxs)("div",{className:"flex min-h-full",children:[(0,s.jsx)("div",{className:"w-[320px] flex-shrink-0",children:(0,s.jsxs)("div",{className:"sticky top-2 pr-4",children:[(0,s.jsx)("h4",{className:"py-4 text-xs font-semibold uppercase opacity-70",children:"Jump to:"}),(0,s.jsx)(u.I,{type:"text",placeholder:"Filter functions...",value:y,onChange:e=>{b(e.target.value)}}),(0,s.jsxs)("ul",{className:"mt-4 max-h-max space-y-2 overflow-y-auto pb-4",style:{maxHeight:"calc(100vh - 160px)"},children:[!r&&Array.from({length:10}).map((e,t)=>(0,s.jsx)("li",{className:"pt-2",children:(0,s.jsx)(m.O,{className:"h-[25px]"})},t)),null==v?void 0:v.map((e,n)=>(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"#".concat(e.name),className:(0,f.cn)("whitespace-nowrap text-sm hover:text-orange-500 hover:underline",e.name===t?"text-orange-500":null),children:[(0,s.jsxs)("span",{className:"opacity-50",children:["payable"===e.stateMutability&&(0,s.jsx)(i.Z,{className:"mr-2 inline-block h-4 w-4"}),("view"===e.stateMutability||"pure"===e.stateMutability)&&(0,s.jsx)(l.Z,{className:"mr-2 inline-block h-4 w-4"}),"nonpayable"===e.stateMutability&&(0,s.jsx)(o.Z,{className:"mr-2 inline-block h-4 w-4"})]}),(0,s.jsx)("span",{children:e.name}),e.inputs.length>0&&(0,s.jsxs)("span",{className:"opacity-50",children:[" (",e.inputs.length,")"]})]})},n))]})]})}),(0,s.jsxs)("div",{className:"min-h-full w-full border-l pl-4",children:[!r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.O,{className:"h-[100px]"}),(0,s.jsx)(d.Z,{className:"my-4"}),(0,s.jsx)(m.O,{className:"h-[100px]"}),(0,s.jsx)(d.Z,{className:"my-4"}),(0,s.jsx)(m.O,{className:"h-[100px]"}),(0,s.jsx)(d.Z,{className:"my-4"}),(0,s.jsx)(m.O,{className:"h-[100px]"})]}),null==v?void 0:v.map(e=>(0,s.jsx)(A,{abi:e},JSON.stringify(e)))]})]})}},35605:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(6270),a=n(84367);function s(){let{chainName:e}=(0,r.useParams)();return(0,a.Yx)(e),a.df[e]}},63643:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(6270),a=n(95951),s=n(84367);function i(){let{chainName:e,worldAddress:t}=(0,r.useParams)();(0,s.Yx)(e);let{id:n}=s.df[e];return(0,a.a)({queryKey:["worldAbi",e,t],queryFn:async()=>{let e=await fetch("/api/world-abi?".concat(new URLSearchParams({chainId:n.toString(),worldAddress:t})));return await e.json()},select:e=>({abi:e.abi||[],isWorldDeployed:e.isWorldDeployed}),refetchInterval:15e3})}},84367:function(e,t,n){"use strict";n.d(t,{is:function(){return d},M0:function(){return c},df:function(){return u},wG:function(){return m},Yx:function(){return f}});var r=n(37272),a=n(74278),s=n(47852),i=n(84432);({...a.t});var l={...s.T,iconUrls:["https://redstone.xyz/chain-icons/garnet.png"],indexerUrl:"https://indexer.mud.garnetchain.com"},o={...i.g,iconUrls:["https://redstone.xyz/chain-icons/redstone.png"],indexerUrl:"https://indexer.mud.redstonechain.com"};let c=["world","store","metadata"],u={anvil:r.O,garnet:l,redstone:o},d=Object.fromEntries(Object.entries(u).map(e=>{let[t,n]=e;return[n.id,t]}));function m(e){if(!("number"==typeof e&&e in d))throw Error("Invalid chain ID. Supported chains are: ".concat(Object.keys(d).join(", "),"."))}function f(e){if(!("string"==typeof e&&e in u))throw Error("Invalid chain name. Supported chains are: ".concat(Object.keys(u).join(", "),"."))}},85723:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(75536),a=n(67157),s=n(89702),i=n(14292),l=n(66585);let o=(0,a.j)((0,l.cn)("inline-flex items-center justify-center rounded-md","whitespace-nowrap text-sm font-medium","ring-offset-background transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50"),{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:a,size:s,type:c="button",asChild:u=!1,...d}=e,m=u?i.g7:"button";return(0,r.jsx)(m,{className:(0,l.cn)(o({variant:a,size:s,className:n})),ref:t,type:c,...d})});c.displayName="Button"},29438:function(e,t,n){"use strict";n.d(t,{l0:function(){return m},NI:function(){return v},Wi:function(){return p},xJ:function(){return b},lX:function(){return y},zG:function(){return g}});var r=n(75536),a=n(89702),s=n(59201),i=n(14292),l=n(67157),o=n(69213),c=n(66585);let u=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(o.f,{ref:t,className:(0,c.cn)(u(),n),...a})});d.displayName=o.f.displayName;let m=s.RV,f=a.createContext({}),p=e=>{let{...t}=e;return(0,r.jsx)(f.Provider,{value:{name:t.name},children:(0,r.jsx)(s.Qr,{...t})})},h=()=>{let e=a.useContext(f),t=a.useContext(x),{getFieldState:n,formState:r}=(0,s.Gc)(),i=n(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},x=a.createContext({}),b=a.forwardRef((e,t)=>{let{className:n,...s}=e,i=a.useId();return(0,r.jsx)(x.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:t,className:(0,c.cn)("space-y-2",n),...s})})});b.displayName="FormItem";let y=a.forwardRef((e,t)=>{let{className:n,...a}=e,{error:s,formItemId:i}=h();return(0,r.jsx)(d,{ref:t,className:(0,c.cn)(s&&"text-destructive",n),htmlFor:i,...a})});y.displayName="FormLabel";let v=a.forwardRef((e,t)=>{let{...n}=e,{error:a,formItemId:s,formDescriptionId:l,formMessageId:o}=h();return(0,r.jsx)(i.g7,{ref:t,id:s,"aria-describedby":a?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!a,...n})});v.displayName="FormControl",a.forwardRef((e,t)=>{let{className:n,...a}=e,{formDescriptionId:s}=h();return(0,r.jsx)("p",{ref:t,id:s,className:(0,c.cn)("text-sm text-muted-foreground",n),...a})}).displayName="FormDescription";let g=a.forwardRef((e,t)=>{let{className:n,children:a,...s}=e,{error:i,formMessageId:l}=h(),o=i?String(null==i?void 0:i.message):a;return o?(0,r.jsx)("p",{ref:t,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",n),...s,children:o}):null});g.displayName="FormMessage"},33929:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(75536),a=n(89702),s=n(66585);let i=a.forwardRef((e,t)=>{let{className:n,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md px-3 py-2 text-sm","border border-input bg-background ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Input"},35431:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(75536),a=n(89702),s=n(80967),i=n(66585);let l=a.forwardRef((e,t)=>{let{className:n,orientation:a="horizontal",decorative:l=!0,...o}=e;return(0,r.jsx)(s.f,{ref:t,decorative:l,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",n),...o})});l.displayName=s.f.displayName},68347:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(75536),a=n(66585);function s(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...n})}},66585:function(e,t,n){"use strict";n.d(t,{a:function(){return o},cn:function(){return i},f:function(){return l}});var r=n(20997),a=n(88014),s=n(47228);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m)((0,a.W)(t))}function l(e){return e.replace(/[A-Z]/g,e=>"_".concat(e.toLowerCase())).replace(/^_/,"")}function o(e){let t=(0,r.d)(e),n=Math.floor(parseFloat(t)).toString().length;return parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:Math.max(0,6-n)})}}},function(e){e.O(0,[5056,2762,7994,879,9576,2163,9322,9213,8474,1744],function(){return e(e.s=74935)}),_N_E=e.O()}]);